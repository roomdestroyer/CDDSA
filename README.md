如有问题请先联系 QQ : 1071665725

### 1. 问题描述

对于一个石油传送网络可由一个加权有向无环图G表示。该图中有一个称为源点的顶点S ( 保证S的入度为0 ) , 从S出发 , 石油流向图中的其他顶点 . G中每条边上的权重为它所连接的两点间的距离。

在输送石油的过程中 , 需要有一定的压力才能使石油从一个点到达另一个点，但压力会随着路程的增加而降低 ( 即压力的损失量是路程的函数 ) . 

因此为了保证石油在网络的正常运输，在网络传输中必须保证在**任何位置**的压力都要不小于最小压力Pmin。为了维持这个最小压力，可在G中的一些或全部顶点放置压力放大器 , 压力放大器可以将压力恢复至该网络允许的最大压力Pmax。

可以设d为石油从压力Pmax降为压力Pmin所走的距离 , 在无压力放大器的情况下石油可运输的距离不超过d . 

在该问题中 , 需要在G中放置**最少**的压力放大器 , 使得该传输网络从S出发，能够将汽油输送到图中的**所有位置**。

### 2. 相关假设

1. 为了简化计算 , 每走一个单位长度就会降低一个单位压力且Pmin=0 , 即d=Pmax - Pmin = Pmax
2. 起点S处的压力为Pmax
3. 如果存在一个点x , x有多条入边e[1]..e[n] , x处的压力`p[x] = max(p[x], p[e[i].from] - e[i].cost) `即x处的压力为到达x处的压力中的最大值 
4. **图中每条边上的任何一点都要能到达** : 例如 如果存在一个点x ,  x处的压力>Pmin , 但存在一条边 e , p[e.from] - e.cost < Pmin 这也是不合法的

### 3. 基本要求 

1. 给出两种方法以解决上述问题，思考如何验证两种方法的正确性.
4. 比较两种方法的时间和空间性能，用图表显示比较结果。

大家验收的时候可以参考数据里的可视化的示例程序生成结果图用来辅助验收

### 4. 数据集描述

1. 该数据集提供100组石油网络的数据 , 可自行选择进行测试 , 输入数据在input文件夹下, 标准输出数据在outputSTD文件夹下
2. 在Image文件夹下存放了每组结果的可视化图片 , 标注了边权 , 压力 , 是否放置放大器  .  (注 : 仅供参考 , 可能存在多种方案)
3. 该数据集保证加权有向无环图 , 保证只有一个入度为0的源点
4. 根目录下的make.py为数据生成器 , 数据生成器依赖于库[cyaron](https://github.com/luogu-dev/cyaron/wiki) , 你可以阅读该文档以了解其使用方法和原理 ~~cyaron并没有指出生成的dag只有一个源点 , 但他的写法确实只有一个源点~~

### 5. 数据集格式

输入数据 : 

第一行包含三个整数 `[n, m, l]` , 源点均为 ` 1 ` 号节点

-  ` n ` 表示节点个数
-  ` m ` 表示边的个数
-  ` l ` 表示最大边权 ( 可以认为是Pmax )

接下来 ` m ` 行 , 每行三个正整数`[x, y, c]`用来标识一条有向边
-  ` x ` 表示起点
-  ` y ` 表示终点
-  ` c ` 表示边权

输出数据 : 

一行一个整数 , 表示最少的放大器的个数

### 6. 可视化参考

1. Visualization.cpp提供了c++的可视化例子, 你可以参考这份代码以帮助你调试代码
2. 可视化依赖于graphviz / dot, 关于graphviz的使用和安装你可以参考[官网](http://www.graphviz.org/)
3. 可以参考的使用方式为 :
> install graphviz  
> g++ Visualization.cpp -o 1 -g  
> ./1 < data/input1.in  
> open solve1.jpg  

### 7. 对拍程序

check.cpp提供了C++的对拍程序 , 你可以把你的程序改为main.cpp后 , 放到当前目录下 , 然后编译运行check.cpp.

注 : 对拍使用的是diff为linux下的指令, 如果你为windows环境 , 你需要做一些修改